--- ./doc/Makefile.am.org	Sun Jan 27 17:17:53 2002
+++ ./doc/Makefile.am	Sun Jan 27 17:18:08 2002
@@ -0,0 +1,4 @@
+man1_MANS = ui.1
+
+EXTRA_DIST = $(man1_MANS)
+
--- ./doc/ui.1.org	Sun Jan 27 17:25:16 2002
+++ ./doc/ui.1	Sat Jan 26 19:51:39 2002
@@ -0,0 +1,207 @@
+.\" Copyright (C) 2001-2002  bjk <bjk@arbornet.org>
+.\"
+.\" This program is free software; you can redistribute it and/or modify
+.\" it under the terms of the GNU General Public License as published by
+.\" the Free Software Foundation; either version 2 of the License, or
+.\" (at your option) any later version.
+.\"
+.\" This program is distributed in the hope that it will be useful,
+.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
+.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+.\" GNU General Public License for more details.
+.\"
+.\" You should have received a copy of the GNU General Public License
+.\" along with this program; if not, write to the Free Software
+.\" Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+.TH userinfo 1 "userinfo"
+.TH ui 1
+.SH NAME
+ui - Display information about a user
+
+.SH SYNOPSIS
+.B ui
+[
+.B -hvV
+] [
+.B -D c
+] [
+.B -j format
+]
+.B [options] [-f <filename> ... | user ...]
+
+.SH DESCRIPTION
+.PP
+.B ui
+tries to output as much information about a local user as possible. Multiple
+usernames or filenames (see 
+.B -f
+) may be specified. If no arguments are given, or a username or filename is -,
+then standard input is used. Options which are noted to use 
+.B strftime(3)
+to format time values can use the 
+.B -j
+option to specify an alternate time format.
+
+.SH OPTIONS
+.PP
+The following are the available options divided into sections or 'modes'. Note
+that the major options -P, -M, -L and -A can only be specified once.
+.TP
+.B -A
+Output all available information. This is the same as specifying all output
+options (-PML).
+.TP
+.B -j format
+Specify an alternate time format for time values. See the
+.B strftime(3)
+manual page for format options.
+.TP
+.B -D c
+Separate fields with this character.
+.TP
+.B -f file
+Treat the owner of the specified file as the username.
+.TP
+.B -v
+Output verbosely. This option will output GIDs with group names if the
+.B -g
+option is specified, and
+filenames if the 
+.B -f
+option is specified.
+.TP
+.B -h
+Show program help text.
+.TP
+.B -V
+Version information.
+
+.SH PASSWORD FILE OPTIONS
+.TP
+.B -P
+Output all available password and group file information. The order of the
+options is specified at compile time. See help (-h) output.
+.TP
+.B -l
+Login name.
+.TP
+.B -p
+Encrypted password (must be root).
+.TP
+.B -u
+User ID (UID).
+.TP
+.B -g
+Group ID (GID).
+.TP
+.B -c
+Password change time. The number of days until the user must change his
+password (must be root).
+.TP
+.B -k
+Password expire time. The number of days until the users password expires
+(must be root).
+.TP
+.B -i nowha
+This option shows the gecos information from the 
+.B passwd(5) 
+file and needs one or more of the following sub-options: [n]ame, [o]ffice,
+[w]orkphone, [h]omephone and [a]ll.
+.TP
+.B -d
+Users home directory.
+.TP
+.B -s
+Users shell.
+.TP
+.B -m
+This option shows the users home directory permission mode in octal.
+
+.SH MAIL OPTIONS
+.TP
+.B -M
+Output all available mail information. The order of the options is specified
+at compile time. See help (-h) output.
+.TP
+.B -z
+The size of the users mail spool file in bytes.
+.TP
+.B -w
+Display the users mail spool last modification (new mail) time in
+.B strftime(3)
+format.
+.TP
+.B -r
+Show the users mail spool file last access time (last read) in
+.B strftime(3)
+format.
+.TP
+.B -o
+Display any mail forwarding addresses for the user. This option tries to open
+the 
+.B forward(5)
+file in the users home directory.
+.TP
+.B -a
+Show any mail 
+.B aliases(5)
+for the user.
+
+.SH LOGIN OPTIONS
+.TP
+.B -L
+Output all available login information. The order of the options is specified
+at compile time. See help (-h) output.
+.TP
+.B -C
+Parent process ID (PPID). This will normally display the process id of the
+login shell.
+.TP
+.B -b
+If the user is logged in, the number of minutes since logged in.
+.TP
+.B -q
+If the user is logged in, show how long a user has been idle (not doing
+anything).
+.TP
+.B -e
+Message status for user. This option checks to see if a users tty is group or
+world writeable (as needed by talk programs).
+.TP
+.B -y
+If the user is logged in, the name of the tty issued.
+.TP
+.B -x
+If the user is logged in, the users hostname or IP address.
+.TP
+.B -t
+If the user is logged in, a 
+.B strftime(3)
+time when logged in.
+.TP
+.B -n thia
+This option reads the
+.B lastlog(5)
+file to determine information about when the user was last logged in. This
+option needs one or more of the following sub-options: [t]ty, [h]ostname,
+t[i]me and [a]ll.
+
+.SH SEE ALSO
+.PP
+.B passwd(5),
+.B aliases(5),
+.B forward(5),
+.B utmp(5),
+.B lastlog(5),
+.B strftime(3)
+
+.SH BUGS
+.PP
+Included files and subgroups in the mail alias file aren't considered and
+a user@localhost is not matched in the alias file. Parent process info lookup
+could be better.
+
+.SH COPYRIGHT
+.PP
+Written by bjk <bjk@arbornet.org> and distributed under the terms of the GPL
+version 2 or later.
--- ./ui.c.org	Sun Jan 27 17:10:28 2002
+++ ./ui.c	Sun Jan 27 17:11:04 2002
@@ -207,7 +207,7 @@
 		      break;
 	    case 'h': usage(myargv[0]); 
 		      break;
-	    case 'V': fprintf(stdout, "%s\n%s\n", VERSION, COPYRIGHT);
+	    case 'V': fprintf(stdout, "%s\n%s\n", PACKAGE "-" VERSION, COPYRIGHT);
 		      exit(EXIT_SUCCESS);
 		      break;
 	    case 'f': usefile = 1;
--- ./ui.h.org	Sat Jan 26 17:59:54 2002
+++ ./ui.h	Sun Jan 27 17:12:30 2002
@@ -15,7 +15,6 @@
     along with this program; if not, write to the Free Software
     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
-#define VERSION "Userinfo 1.5"
 #define COPYRIGHT "Copyright 2001-2002 bjk <bjk@arbornet.org>"
 
 #ifdef __linux__
--- ./autogen.sh.org	Sun Jan 27 17:13:10 2002
+++ ./autogen.sh	Sun Jan 27 17:13:27 2002
@@ -0,0 +1,7 @@
+rm -f missing
+libtoolize --copy --force
+aclocal
+autoconf
+autoheader
+automake -a -c
+
--- ./Makefile.am.org	Sun Jan 27 17:14:15 2002
+++ ./Makefile.am	Sun Jan 27 17:31:50 2002
@@ -0,0 +1,12 @@
+CLEANFILES = *~
+
+SUBDIRS = doc
+
+bin_PROGRAMS = ui
+ui_SOURCES = ui.c passwd.c login.c mail.c misc.c output.c process.c getopt.c \
+            common.h login.h ui.h
+
+DEFS = -DHAVE_CONFIG_H -D_GNU_SOURCE
+
+AUTOMAKE_OPTIONS=foreign
+
Binary files ./ui.1.gz.org and ./ui.1.gz differ
--- ./configure.in.org	Sun Jan 27 17:35:15 2002
+++ ./configure.in	Sun Jan 27 17:17:21 2002
@@ -1,7 +1,8 @@
 dnl Process this file with autoconf to produce a configure script.
 AC_INIT(ui.c)
-AC_CONFIG_HEADER(config.h)
-AC_CANONICAL_SYSTEM
+AC_CANONICAL_TARGET
+AM_CONFIG_HEADER([config.h])
+AM_INIT_AUTOMAKE(userinfo, 1.5)
 
 if test "$DESTDIR"; then
     AC_SUBST(prefix)
@@ -12,6 +13,7 @@
 dnl Checks for programs.
 AC_PROG_CC
 AC_PROG_INSTALL
+AM_PROG_LIBTOOL
 
 dnl Checks for header files.
 AC_HEADER_STDC
@@ -89,4 +91,5 @@
 fi
 AC_DEFINE_UNQUOTED(ALIAS_FILE, "$alias_file")
 
-AC_OUTPUT(Makefile)
+AC_OUTPUT([Makefile
+	doc/Makefile])
